---
title : Java基础
---

## 包装类型

包装类型是java为每种基本数据类型提供的对应的类对象类型，让基本类型具备对象的特性。

基本类型是Java最原始的数据类型，不是对象，操作效率高，内存占用小，如果是局部变量一般存储在栈内存，但是如果是成员变量就存储在堆`/方法区/元空间(static修饰的静态变量)`。

包装类型是基本类型的类，是对象，可以用于集合，支持泛型，主要存储在堆中，如果是局部变量，在栈上，如果是成员变量存储在堆，对于一些比如说Integer范围内的常量，JVM会缓存，也就是包装类型的缓存机制，存储在常量池或栈。

包装类型的缓存机制

JVM会将常见的重复使用的对象进行复用，避免每次都创建新的对象，提高性能，减少内存使用。

比如Integer，JVM会缓存`-128到127`的整数。调用`Integer.valueOf(int)`的时候，如果传入的整数在这个范围，JVM就返回一个已经创建好的共享对象，而不是在创建一个新的Integer对象。Boolean类型JVM只会缓存true和false两个值。

## 浮点数精度丢失

浮点数运算进度丢失是因为计算机二进制存储数字，但是有些小数不能在有限位数里转化成二进制，所以就需要截断，导致精度丢失

如何解决？

使用Big

## String为什么不可变？

首先在java中，final修饰的引用数据类型不能再指向其他对象，而string的字段value底层存储数据的形式就是字符数组，这个数组被final修饰，并且还是私有的，其次string这个类本身也是被final修饰的，那么它就不能被继承，你就不能通过子类来修改，其次，stringbuilder和stringbuffer继承了abstractstringbuilder类，有append等修改字符串的方法，而string没有继承，自然也没有这种方法，这个原因也体现了OOP的封装特性，所以综上所述，string是不可修改的。

